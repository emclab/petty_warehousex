<% if @view_in_config && @js_erb_code %>
  <%= render inline: ERB.new(@js_erb_code).result(binding) %>
  
<% else %>
  <% if params[:item][:field_changed] == 'item_name' && params[:item][:name_autocomplete] %>
    <% part = PettyWarehousex.material_item_class.find_by_name(params[:item][:name_autocomplete]) %>
    <% if part.present? %>
      $('#item_name').val("<%=part.name %>");
      $('#item_unit').val("<%=part.unit %>");
      <% if part.has_attribute?(:spec)%>
        $('#item_item_spec').val("<%=part.spec %>");
      <% elsif part.has_attributes?(:item_spec)%>
        $('#item_spec').val("<%=part.item_spec %>");
      <% end %>      
    <% else %>
      $('#item_name').val("");
      $('#item_spec').val("");
      $('#item_unit').val("");
    <% end %>
    $('#item_field_changed').val('');
  <% end %>
<% end %>
